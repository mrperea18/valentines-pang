<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Valentine Request v3.2</title>

<style>
  body{
    margin:0;
    font-family:monospace;
    background:#020617;
    color:#e5e7eb;
    display:flex;
    align-items:center;
    justify-content:center;
    height:100vh;
    overflow:hidden;
  }

  .card{
    background:#020617;
    border:1px solid #1e293b;
    padding:20px;
    border-radius:18px;
    width:92%;
    max-width:380px;
    box-shadow:0 25px 60px rgba(0,0,0,.6);
    z-index:5;
  }

  input,button{
    width:100%;
    padding:12px;
    border-radius:12px;
    border:none;
    margin-top:10px;
    font-weight:bold;
  }

  input{ font-weight:normal }

  .yes{ background:#22c55e }
  .no{ background:#ef4444;color:white }

  .terminal{
    background:black;
    border-radius:12px;
    padding:14px;
    min-height:140px;
    white-space:pre-wrap;
    font-size:14px;
  }

  #cameraOverlay{
    position:fixed;
    inset:0;
    background:black;
    display:none;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    z-index:20;
  }

  video,img{
    width:100%;
    max-height:75vh;
  }

  .camera-text{
    color:white;
    margin-top:10px;
  }

  canvas{display:none}

  .firework{
    position:fixed;
    width:6px;
    height:6px;
    border-radius:50%;
    animation:explode 1.2s ease-out forwards;
  }

  @keyframes explode{
    to{
      transform:translate(var(--x),var(--y));
      opacity:0;
    }
  }

  .flyaway{
    position:fixed !important;
    transition:transform 1s ease, opacity 1s ease;
    z-index:30;
  }
</style>
</head>

<body>

<!-- LOCK SCREEN -->
<div class="card" id="lock">
  <h3>üîê Secure Access</h3>
  <p>Enter our special code ‚ù§Ô∏è</p>
  <input id="code" type="password" placeholder="Hint: Our date üòâ">
  <button class="yes" onclick="unlock()">Unlock</button>
</div>

<!-- MAIN APP -->
<div class="card" id="app" style="display:none">
  <h3>POST /valentine-request üíò</h3>
  <div class="terminal" id="terminal"></div>
  <button class="yes" onclick="accept()">200 OK ‚Äì YES</button>
  <button class="no" id="noBtn" onclick="flyAway()">403 ‚Äì NO</button>
</div>

<!-- CAMERA -->
<div id="cameraOverlay">
  <video id="video" autoplay playsinline></video>
  <img id="photo" style="display:none">
  <canvas id="canvas"></canvas>
  <div class="camera-text" id="camText">
    üì∏ Capturing our YES moment...
  </div>
</div>

<script>
/* ‚úèÔ∏è CUSTOMIZE */
const PASSCODE = "0214";

/* LOCK */
function unlock(){
  if(code.value === PASSCODE){
    lock.style.display="none";
    app.style.display="block";
    typeText();
  }else{
    alert("‚ùå Access denied üòå");
  }
}

/* TERMINAL */
const terminal = document.getElementById("terminal");
const lines = [
  "Initializing romance protocol...",
  "Target user authenticated ‚ù§Ô∏è",
  "",
  "{",
  '  "request": "Valentine Date",',
  '  "status": "PENDING"',
  "}",
  "",
  "Awaiting response..."
];
let i=0;
function typeText(){
  if(i<lines.length){
    terminal.innerHTML += lines[i++]+"\n";
    setTimeout(typeText,300);
  }
}

/* NO BUTTON FLY AWAY */
function flyAway(){
  const btn = document.getElementById("noBtn");
  btn.classList.add("flyaway");
  btn.style.transform =
    `translate(${Math.random()>0.5?'-':'+'}150vw, -150vh) rotate(720deg)`;
  btn.style.opacity = "0";
  setTimeout(()=>btn.remove(),1000);
}

/* YES FLOW */
function accept(){
  fireworks();
  openCamera();
}

function openCamera(){
  cameraOverlay.style.display="flex";
  navigator.mediaDevices.getUserMedia({video:true})
    .then(stream=>{
      video.srcObject = stream;
      setTimeout(capture,2000); // AUTO CAPTURE
    });
}

function capture(){
  const canvas = document.getElementById("canvas");
  canvas.width = video.videoWidth;
  canvas.height = video.videoHeight;
  canvas.getContext("2d").drawImage(video,0,0);
  photo.src = canvas.toDataURL("image/png");
  photo.style.display="block";
  video.style.display="none";
  camText.innerHTML="üíñ This moment is saved";
}

/* FIREWORKS */
function fireworks(){
  for(let i=0;i<14;i++){
    const f=document.createElement("div");
    f.className="firework";
    f.style.left=Math.random()*100+"vw";
    f.style.top=Math.random()*60+"vh";
    f.style.background=`hsl(${Math.random()*360},100%,70%)`;
    f.style.setProperty("--x",`${Math.random()*200-100}px`);
    f.style.setProperty("--y",`${Math.random()*200-100}px`);
    document.body.appendChild(f);
    setTimeout(()=>f.remove(),1200);
  }
}
</script>

</body>
</html>
